{"version":3,"names":["sallaPaymentsCss","SallaPayments","exports","class_1","hostRef","_this","this","salla","config","get","url","cdn","paymentSlot","_a","host","querySelector","innerHTML","concat","placeholderImage","sbcSlot","_b","codSlot","_c","onReady","payments","prototype","render","h","Host","class","withMadeInKsa","width","height","decoding","loading","alt","map","payment","id","replace","withSbc","sbcId","componentDidLoad","document","lazyLoadInstance","update","querySelectorAll","forEach","img","addEventListener","setAttribute","componentDidRender","el","replaceWith","firstChild","remove"],"sources":["src/components/salla-payments/salla-payments.scss?tag=salla-payments","src/components/salla-payments/salla-payments.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n","import { Component, Host, Prop, State, h, Element } from '@stencil/core';\n/**\n * @slot payment - Replaces payment item, has replaceable props `{image}`, `{name}`.\n * @slot sbc - Replaces SBC certificate item, has replaceable props `{image}`.\n * @slot cod - Replaces COD item, has replaceable props `{image}`.\n */\n@Component({\n  tag: 'salla-payments',\n  styleUrl: 'salla-payments.scss'\n})\n\nexport class SallaPayments {\n  constructor() {\n    this.paymentSlot = this.host.querySelector('[slot=\"payment\"]')?.innerHTML || `<li class=\"s-payments-list-item\"><img class=\"lazy\" width=\"100%\" height=\"100%\" src=\"${this.placeholderImage}\" data-src=\"{image}\" alt={name} /><li>`;\n    this.sbcSlot = this.host.querySelector('[slot=\"sbc\"]')?.innerHTML || `<li class=\"s-payments-list-item\"><a target=\"_blank\" href=\"{link}\"> <img width=\"100%\" height=\"100%\" src=\"${this.placeholderImage}\" data-src={image} class=\"lazy s-payments-sbc-image\" alt=\"SBC\"/></a><li>`;\n    this.codSlot = this.host.querySelector('[slot=\"cod\"]')?.innerHTML || `<li class=\"s-payments-list-item\"> <img width=\"100%\" height=\"100%\" src=\"${this.placeholderImage}\" data-src={image} class=\"lazy\" alt=\"COD\"/><li>`;\n\n    salla.onReady(() => {\n      this.payments = salla.config.get('store.settings.payments');\n      this.placeholderImage = salla.url.cdn(`images/s-empty.png`);\n    });\n  }\n  private readonly paymentSlot: string;\n  private readonly sbcSlot: string;\n  private readonly codSlot: string;\n  @Element() host: HTMLElement;\n  @State() payments = salla.config.get('store.settings.payments');\n  @State() placeholderImage = salla.url.cdn(`images/s-empty.png`);\n\n  /**\n   * Boolean indicating whether to include the SBC (Saudi Business Council) certificate.\n   */\n  @Prop() withSbc: boolean;\n  \n  /**\n   * The SBC (Saudi Business Council) certificate ID.\n   */\n  @Prop() sbcId: string;\n\n  /**\n   * Boolean indicating whether to include the \"Made in KSA\" certification.\n   */\n  @Prop() withMadeInKsa: boolean;\n\n  render() {\n    return (\n      <Host class=\"s-payments-list\">\n\n        {/* Made in KSA */}\n        {this.withMadeInKsa && <li class=\"s-payments-list-item\">\n          <img class=\"lazy\" width=\"100%\" height=\"100%\" decoding=\"async\" loading=\"lazy\" data-src={salla.url.cdn(`images/made-in-ksa.svg`)} alt=\"made in KSA certified\" />\n        </li>}\n\n        {/* Dynamic methods */}\n        {this.payments.map((payment) => (\n          <div id=\"payment-slot\" innerHTML={this.paymentSlot\n            .replace(/\\{image\\}/g, salla.url.cdn(`images/payment/${payment}_mini.png`))\n            .replace(/\\{payment\\}/g, payment)}>\n          </div>\n        ))}\n\n        {/* COD method - Static in all stores */}\n        <div id=\"cod-slot\" innerHTML={this.codSlot\n          .replace(/\\{image\\}/g, salla.url.cdn(`images/payment/cod_mini.png`))}>\n        </div>\n\n        {/* SBC certificate */}\n        {this.withSbc && this.sbcId && <div id=\"sbc-slot\" innerHTML={this.sbcSlot\n              .replace(/\\{image\\}/g, salla.url.cdn(`images/sbc.png`))\n              .replace(/\\{link\\}/g, `https://eauthenticate.saudibusiness.gov.sa/certificate-details/${this.sbcId}`)}>\n        </div>}\n      </Host>\n    );\n  }\n  componentDidLoad() {\n    document.lazyLoadInstance?.update(this.host.querySelectorAll('.lazy'));\n    // fix lazy loaded images that have 100% width and height\n    this.host.querySelectorAll('.lazy').forEach((img) => {\n      img.addEventListener('load', () => {\n        img.setAttribute('width', \"100%\");\n        img.setAttribute('height', \"100%\");\n      });\n    });\n  }\n  componentDidRender() {\n    this.host.querySelectorAll('#payment-slot').forEach(el => el.replaceWith(el.firstChild));\n    this.host.querySelectorAll('#sbc-slot').forEach(el => el.replaceWith(el.firstChild));\n    this.host.querySelectorAll('#cod-slot').forEach(el => el.replaceWith(el.firstChild));\n    this.host.querySelector('[slot=\"payment\"]')?.remove();\n    this.host.querySelector('[slot=\"sbc\"]')?.remove();\n    this.host.querySelector('[slot=\"cod\"]')?.remove();\n  }\n}\n"],"mappings":";;;0JAAA,IAAMA,EAAmB,uB,ICWZC,EAAaC,EAAA,4BACxB,SAAAC,EAAAC,GAAA,IAAAC,EAAAC,K,kCAcoBC,MAAMC,OAAOC,IAAI,2B,sBACTF,MAAMG,IAAIC,IAAI,sB,yEAdxCL,KAAKM,cAAcC,EAAAP,KAAKQ,KAAKC,cAAc,uBAAmB,MAAAF,SAAA,SAAAA,EAAEG,YAAa,sFAAAC,OAAsFX,KAAKY,iBAAgB,0CACxLZ,KAAKa,UAAUC,EAAAd,KAAKQ,KAAKC,cAAc,mBAAe,MAAAK,SAAA,SAAAA,EAAEJ,YAAa,2GAAAC,OAA2GX,KAAKY,iBAAgB,4EACrMZ,KAAKe,UAAUC,EAAAhB,KAAKQ,KAAKC,cAAc,mBAAe,MAAAO,SAAA,SAAAA,EAAEN,YAAa,0EAAAC,OAA0EX,KAAKY,iBAAgB,mDAEpKX,MAAMgB,SAAQ,WACZlB,EAAKmB,SAAWjB,MAAMC,OAAOC,IAAI,2BACjCJ,EAAKa,iBAAmBX,MAAMG,IAAIC,IAAI,qB,IAyB1CR,EAAAsB,UAAAC,OAAA,eAAArB,EAAAC,KACE,OACEqB,EAACC,EAAI,CAACC,MAAM,mBAGTvB,KAAKwB,eAAiBH,EAAA,MAAIE,MAAM,wBAC/BF,EAAA,OAAKE,MAAM,OAAOE,MAAM,OAAOC,OAAO,OAAOC,SAAS,QAAQC,QAAQ,OAAM,WAAW3B,MAAMG,IAAIC,IAAI,0BAA2BwB,IAAI,2BAIrI7B,KAAKkB,SAASY,KAAI,SAACC,GAAO,OACzBV,EAAA,OAAKW,GAAG,eAAetB,UAAWX,EAAKO,YACpC2B,QAAQ,aAAchC,MAAMG,IAAIC,IAAI,kBAAAM,OAAkBoB,EAAO,eAC7DE,QAAQ,eAAgBF,IAHF,IAQ3BV,EAAA,OAAKW,GAAG,WAAWtB,UAAWV,KAAKe,QAChCkB,QAAQ,aAAchC,MAAMG,IAAIC,IAAI,kCAItCL,KAAKkC,SAAWlC,KAAKmC,OAASd,EAAA,OAAKW,GAAG,WAAWtB,UAAWV,KAAKa,QAC3DoB,QAAQ,aAAchC,MAAMG,IAAIC,IAAI,mBACpC4B,QAAQ,YAAa,kEAAAtB,OAAkEX,KAAKmC,U,EAKzGtC,EAAAsB,UAAAiB,iBAAA,W,OACE7B,EAAA8B,SAASC,oBAAgB,MAAA/B,SAAA,SAAAA,EAAEgC,OAAOvC,KAAKQ,KAAKgC,iBAAiB,UAE7DxC,KAAKQ,KAAKgC,iBAAiB,SAASC,SAAQ,SAACC,GAC3CA,EAAIC,iBAAiB,QAAQ,WAC3BD,EAAIE,aAAa,QAAS,QAC1BF,EAAIE,aAAa,SAAU,O,QAIjC/C,EAAAsB,UAAA0B,mBAAA,W,UACE7C,KAAKQ,KAAKgC,iBAAiB,iBAAiBC,SAAQ,SAAAK,GAAM,OAAAA,EAAGC,YAAYD,EAAGE,WAAlB,IAC1DhD,KAAKQ,KAAKgC,iBAAiB,aAAaC,SAAQ,SAAAK,GAAM,OAAAA,EAAGC,YAAYD,EAAGE,WAAlB,IACtDhD,KAAKQ,KAAKgC,iBAAiB,aAAaC,SAAQ,SAAAK,GAAM,OAAAA,EAAGC,YAAYD,EAAGE,WAAlB,KACtDzC,EAAAP,KAAKQ,KAAKC,cAAc,uBAAmB,MAAAF,SAAA,SAAAA,EAAE0C,UAC7CnC,EAAAd,KAAKQ,KAAKC,cAAc,mBAAe,MAAAK,SAAA,SAAAA,EAAEmC,UACzCjC,EAAAhB,KAAKQ,KAAKC,cAAc,mBAAe,MAAAO,SAAA,SAAAA,EAAEiC,Q,yHA/EnB,I"}