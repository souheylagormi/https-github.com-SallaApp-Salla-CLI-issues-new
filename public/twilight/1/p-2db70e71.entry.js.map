{"version":3,"names":["sallaPaymentsCss","SallaPayments","constructor","hostRef","salla","config","get","url","cdn","this","paymentSlot","_a","host","querySelector","innerHTML","placeholderImage","sbcSlot","_b","codSlot","_c","onReady","payments","render","h","Host","class","withMadeInKsa","width","height","decoding","loading","alt","map","payment","id","replace","withSbc","sbcId","componentDidLoad","document","lazyLoadInstance","update","querySelectorAll","forEach","img","addEventListener","setAttribute","componentDidRender","el","replaceWith","firstChild","remove"],"sources":["src/components/salla-payments/salla-payments.scss?tag=salla-payments","src/components/salla-payments/salla-payments.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n","import { Component, Host, Prop, State, h, Element } from '@stencil/core';\n/**\n * @slot payment - Replaces payment item, has replaceable props `{image}`, `{name}`.\n * @slot sbc - Replaces SBC certificate item, has replaceable props `{image}`.\n * @slot cod - Replaces COD item, has replaceable props `{image}`.\n */\n@Component({\n  tag: 'salla-payments',\n  styleUrl: 'salla-payments.scss'\n})\n\nexport class SallaPayments {\n  constructor() {\n    this.paymentSlot = this.host.querySelector('[slot=\"payment\"]')?.innerHTML || `<li class=\"s-payments-list-item\"><img class=\"lazy\" width=\"100%\" height=\"100%\" src=\"${this.placeholderImage}\" data-src=\"{image}\" alt={name} /><li>`;\n    this.sbcSlot = this.host.querySelector('[slot=\"sbc\"]')?.innerHTML || `<li class=\"s-payments-list-item\"><a target=\"_blank\" href=\"{link}\"> <img width=\"100%\" height=\"100%\" src=\"${this.placeholderImage}\" data-src={image} class=\"lazy s-payments-sbc-image\" alt=\"SBC\"/></a><li>`;\n    this.codSlot = this.host.querySelector('[slot=\"cod\"]')?.innerHTML || `<li class=\"s-payments-list-item\"> <img width=\"100%\" height=\"100%\" src=\"${this.placeholderImage}\" data-src={image} class=\"lazy\" alt=\"COD\"/><li>`;\n\n    salla.onReady(() => {\n      this.payments = salla.config.get('store.settings.payments');\n      this.placeholderImage = salla.url.cdn(`images/s-empty.png`);\n    });\n  }\n  private readonly paymentSlot: string;\n  private readonly sbcSlot: string;\n  private readonly codSlot: string;\n  @Element() host: HTMLElement;\n  @State() payments = salla.config.get('store.settings.payments');\n  @State() placeholderImage = salla.url.cdn(`images/s-empty.png`);\n\n  /**\n   * Boolean indicating whether to include the SBC (Saudi Business Council) certificate.\n   */\n  @Prop() withSbc: boolean;\n  \n  /**\n   * The SBC (Saudi Business Council) certificate ID.\n   */\n  @Prop() sbcId: string;\n\n  /**\n   * Boolean indicating whether to include the \"Made in KSA\" certification.\n   */\n  @Prop() withMadeInKsa: boolean;\n\n  render() {\n    return (\n      <Host class=\"s-payments-list\">\n\n        {/* Made in KSA */}\n        {this.withMadeInKsa && <li class=\"s-payments-list-item\">\n          <img class=\"lazy\" width=\"100%\" height=\"100%\" decoding=\"async\" loading=\"lazy\" data-src={salla.url.cdn(`images/made-in-ksa.svg`)} alt=\"made in KSA certified\" />\n        </li>}\n\n        {/* Dynamic methods */}\n        {this.payments.map((payment) => (\n          <div id=\"payment-slot\" innerHTML={this.paymentSlot\n            .replace(/\\{image\\}/g, salla.url.cdn(`images/payment/${payment}_mini.png`))\n            .replace(/\\{payment\\}/g, payment)}>\n          </div>\n        ))}\n\n        {/* COD method - Static in all stores */}\n        <div id=\"cod-slot\" innerHTML={this.codSlot\n          .replace(/\\{image\\}/g, salla.url.cdn(`images/payment/cod_mini.png`))}>\n        </div>\n\n        {/* SBC certificate */}\n        {this.withSbc && this.sbcId && <div id=\"sbc-slot\" innerHTML={this.sbcSlot\n              .replace(/\\{image\\}/g, salla.url.cdn(`images/sbc.png`))\n              .replace(/\\{link\\}/g, `https://eauthenticate.saudibusiness.gov.sa/certificate-details/${this.sbcId}`)}>\n        </div>}\n      </Host>\n    );\n  }\n  componentDidLoad() {\n    document.lazyLoadInstance?.update(this.host.querySelectorAll('.lazy'));\n    // fix lazy loaded images that have 100% width and height\n    this.host.querySelectorAll('.lazy').forEach((img) => {\n      img.addEventListener('load', () => {\n        img.setAttribute('width', \"100%\");\n        img.setAttribute('height', \"100%\");\n      });\n    });\n  }\n  componentDidRender() {\n    this.host.querySelectorAll('#payment-slot').forEach(el => el.replaceWith(el.firstChild));\n    this.host.querySelectorAll('#sbc-slot').forEach(el => el.replaceWith(el.firstChild));\n    this.host.querySelectorAll('#cod-slot').forEach(el => el.replaceWith(el.firstChild));\n    this.host.querySelector('[slot=\"payment\"]')?.remove();\n    this.host.querySelector('[slot=\"sbc\"]')?.remove();\n    this.host.querySelector('[slot=\"cod\"]')?.remove();\n  }\n}\n"],"mappings":";;;yDAAA,MAAMA,EAAmB,uB,MCWZC,EAAa,MACxB,WAAAC,CAAAC,G,kCAcoBC,MAAMC,OAAOC,IAAI,2B,sBACTF,MAAMG,IAAIC,IAAI,sB,yEAdxCC,KAAKC,cAAcC,EAAAF,KAAKG,KAAKC,cAAc,uBAAmB,MAAAF,SAAA,SAAAA,EAAEG,YAAa,sFAAsFL,KAAKM,yDACxKN,KAAKO,UAAUC,EAAAR,KAAKG,KAAKC,cAAc,mBAAe,MAAAI,SAAA,SAAAA,EAAEH,YAAa,2GAA2GL,KAAKM,2FACrLN,KAAKS,UAAUC,EAAAV,KAAKG,KAAKC,cAAc,mBAAe,MAAAM,SAAA,SAAAA,EAAEL,YAAa,0EAA0EL,KAAKM,kEAEpJX,MAAMgB,SAAQ,KACZX,KAAKY,SAAWjB,MAAMC,OAAOC,IAAI,2BACjCG,KAAKM,iBAAmBX,MAAMG,IAAIC,IAAI,qBAAqB,G,CAyB/D,MAAAc,GACE,OACEC,EAACC,EAAI,CAACC,MAAM,mBAGThB,KAAKiB,eAAiBH,EAAA,MAAIE,MAAM,wBAC/BF,EAAA,OAAKE,MAAM,OAAOE,MAAM,OAAOC,OAAO,OAAOC,SAAS,QAAQC,QAAQ,OAAM,WAAW1B,MAAMG,IAAIC,IAAI,0BAA2BuB,IAAI,2BAIrItB,KAAKY,SAASW,KAAKC,GAClBV,EAAA,OAAKW,GAAG,eAAepB,UAAWL,KAAKC,YACpCyB,QAAQ,aAAc/B,MAAMG,IAAIC,IAAI,kBAAkByB,eACtDE,QAAQ,eAAgBF,OAK7BV,EAAA,OAAKW,GAAG,WAAWpB,UAAWL,KAAKS,QAChCiB,QAAQ,aAAc/B,MAAMG,IAAIC,IAAI,kCAItCC,KAAK2B,SAAW3B,KAAK4B,OAASd,EAAA,OAAKW,GAAG,WAAWpB,UAAWL,KAAKO,QAC3DmB,QAAQ,aAAc/B,MAAMG,IAAIC,IAAI,mBACpC2B,QAAQ,YAAa,kEAAkE1B,KAAK4B,W,CAKzG,gBAAAC,G,OACE3B,EAAA4B,SAASC,oBAAgB,MAAA7B,SAAA,SAAAA,EAAE8B,OAAOhC,KAAKG,KAAK8B,iBAAiB,UAE7DjC,KAAKG,KAAK8B,iBAAiB,SAASC,SAASC,IAC3CA,EAAIC,iBAAiB,QAAQ,KAC3BD,EAAIE,aAAa,QAAS,QAC1BF,EAAIE,aAAa,SAAU,OAAO,GAClC,G,CAGN,kBAAAC,G,UACEtC,KAAKG,KAAK8B,iBAAiB,iBAAiBC,SAAQK,GAAMA,EAAGC,YAAYD,EAAGE,cAC5EzC,KAAKG,KAAK8B,iBAAiB,aAAaC,SAAQK,GAAMA,EAAGC,YAAYD,EAAGE,cACxEzC,KAAKG,KAAK8B,iBAAiB,aAAaC,SAAQK,GAAMA,EAAGC,YAAYD,EAAGE,eACxEvC,EAAAF,KAAKG,KAAKC,cAAc,uBAAmB,MAAAF,SAAA,SAAAA,EAAEwC,UAC7ClC,EAAAR,KAAKG,KAAKC,cAAc,mBAAe,MAAAI,SAAA,SAAAA,EAAEkC,UACzChC,EAAAV,KAAKG,KAAKC,cAAc,mBAAe,MAAAM,SAAA,SAAAA,EAAEgC,Q"}