/*!
 * Crafted with ❤ by Salla
 */
import{r as t,c as i,h as e,H as s}from"./p-e72c32ba.js";const r=":host{display:block}.rtl .rtl-range-slider,[dir=rtl] .rtl-range-slider{-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}.rtl .rtl-range-numbers,[dir=rtl] .rtl-range-numbers{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.rtl .form-select,.rtl select,[dir=rtl] .form-select,[dir=rtl] select{background-position:left 0.5rem center;padding-right:12px}.rtl .menu-divide li:not(:last-child):after,[dir=rtl] .menu-divide li:not(:last-child):after{left:0;right:auto}input[type=range]::-webkit-slider-thumb{pointer-events:all;width:24px;height:24px;-webkit-appearance:none}[type=checkbox]:checked{background-size:80%}";const l=class{constructor(e){t(this,e);this.changed=i(this,"changed",7);this.filterValues=[];this.minPrice=undefined;this.maxPrice=undefined;this.option=undefined;this.filtersData=undefined;this.min=0;this.max=1e4;this.priceOptions=undefined;this.moreThanLabel="أكثر من";this.lessThanLabel="أقل من";this.toLabel="الى";this.fromLabel="من";this.typing=false;this.debounce=setTimeout((()=>""),1e3)}connectedCallback(){var t;if(this.filtersData&&((t=this.filtersData)===null||t===void 0?void 0:t.price)){this.minPrice=this.filtersData.price.min;this.maxPrice=this.filtersData.price.max}salla.lang.onLoaded((()=>{this.moreThanLabel=salla.lang.getWithDefault("common.elements.more_than",this.moreThanLabel);this.lessThanLabel=salla.lang.getWithDefault("common.elements.less_than",this.lessThanLabel);this.toLabel=salla.lang.getWithDefault("common.elements.to",this.toLabel);this.fromLabel=salla.lang.getWithDefault("common.elements.from",this.fromLabel)}));if(this.option.values.length==1){return}if(this.option.values.length<=5){this.filterValues=this.option.values;return}const i=Math.ceil(this.option.values.length/5);for(let t=0;t<this.option.values.length;t+=i){this.filterValues.push(this.option.values.slice(t,t+i).reduce(((t,i)=>{t.to=i.to;t.count+=i.count;return t})))}}async reset(){this.minInput.value=null;this.maxInput.value=null}getPriceLabel(t){if(isNaN(t.from)||t.from<1){return`${this.lessThanLabel} ${salla.money(t.to)}`}if(isNaN(t.to)||t.to<1){return`${this.moreThanLabel} ${salla.money(t.from)}`}return`${salla.money(t.from)} ${this.toLabel} ${salla.money(t.to)}`}handleMinMaxPrice(t,i){this.minPrice=i.from;this.maxPrice=i.to!="*"?i.to:"";this.changedEventHandler(t)}async changedEventHandler(t,i=false){this.typing=true;salla.helpers.inputDigitsOnly(t.target);let e=t?t.target.value*1:"";clearTimeout(this.debounce);this.debounce=setTimeout((()=>{this.typing=false;if(i){if(!this.maxPrice&&e){this.maxPrice=""}this.minInputValidation(e)}else{if(!this.minPrice&&e){this.minPrice=0}this.maxInputValidation(e)}this.isReady&&this.changed.emit({event:t,option:this.option,value:{max:this.maxPrice,min:this.minPrice}})}),1e3)}minInputValidation(t){if(t&&(t>this.max||this.maxPrice&&t>this.maxPrice)){return}if(t<this.min){this.minPrice=this.min;return}if(t){this.minPrice=t}}maxInputValidation(t){if(t&&(t<this.min||this.minPrice&&t<this.minPrice)){return}if(t>this.max){this.maxPrice=this.max;return}if(t){this.maxPrice=t}}isChecked(t){if(!this.minPrice&&!this.maxPrice){return false}let i=(t.from<1||t.from=="*")&&this.minPrice==0||t.from==this.minPrice;let e=t.to=="*"||!t.to||t.to==this.maxPrice;return i&&e}render(){return e(s,null,this.filterValues.map(((t,i)=>e("label",{class:"s-filters-label",htmlFor:`${this.option.key}-${i}`},e("input",{id:`${this.option.key}-${i}`,name:"price",type:"radio",checked:this.isChecked(t),class:"s-filters-radio",onChange:i=>this.handleMinMaxPrice(i,t)}),this.getPriceLabel(t)))),e("div",{class:"flex justify-center items-center"},e("div",{class:"relative max-w-xl w-full"},e("div",{class:"s-price-range-inputs"},e("div",{class:"s-price-range-relative"},e("div",{class:"s-price-range-currency"}," ",salla.config.currency().symbol),e("input",{type:"number",maxlength:"5",ref:t=>this.minInput=t,onInput:t=>this.changedEventHandler(t,true),value:this.minPrice,placeholder:this.fromLabel,class:"s-price-range-number-input"})),e("div",{class:"s-price-range-gray-text"}," -"),e("div",{class:"s-price-range-relative"},e("div",{class:"s-price-range-currency"}," ",salla.config.currency().symbol),e("input",{type:"number",maxlength:"5",placeholder:this.toLabel,ref:t=>this.maxInput=t,onInput:t=>this.changedEventHandler(t),value:this.maxPrice,class:"s-price-range-number-input","aria-describedby":"price-currency"}))))))}componentDidLoad(){this.isReady=true}};l.style=r;export{l as salla_price_range};
//# sourceMappingURL=p-46b530dc.entry.js.map