{"version":3,"names":["sallaProductsSliderCss","SallaProductsSlider","isSourceWithoutValue","includes","this","getSource","getItemHTML","product","url","hasCustomComponent","productCardComponent","toLowerCase","h","class","source","getSourceValue","customElem","document","createElement","setAttribute","JSON","stringify","innerHTML","outerHTML","canRender","sourceValueIsValid","isReady","componentWillLoad","Helper","onSallaReadyPromise","salla","logger","warn","customElements","get","productsData","config","fetchProducts","limit","then","res","data","event","emit","getProductsSource","getProductsSourceValue","sourceValue","render","Host","id","sliderId","Math","random","toString","substr","autoplay","type","blockTitle","subTitle","displayAllUrl","sliderConfig","slot","_a","map"],"sources":["src/components/salla-products-slider/salla-products-slider.scss?tag=salla-products-slider","src/components/salla-products-slider/salla-products-slider.tsx"],"sourcesContent":[".s-products-slider{\n  &-wrapper{\n\n  }\n  &-slider{\n\n  }\n  &-card{\n\n  }\n}","import { Component, Host, h, Prop, Element, State } from '@stencil/core';\nimport Helper from '../../Helpers/Helper';\n@Component({\n  tag: 'salla-products-slider',\n  styleUrl: 'salla-products-slider.scss'\n})\n\n//todo:: extends this component from salla-products-list or the opposite\nexport class SallaProductsSlider {\n  private isSourceWithoutValue() {\n    return ['offers', 'latest', 'sales'].includes(this.getSource());\n  }\n\n  @Element() host: HTMLElement;\n  //todo:: support limit, default =10, make sure that maximum is 32,\n\n  /**\n   * Title of the block - works only if slider is true\n   * @type {string}\n   * @default ''\n   * */\n  @Prop() blockTitle: string;\n\n  /**\n   * Sub title of the block - works only if slider is true\n   * @type {string}\n   * @default ''\n   * */\n  @Prop() subTitle: string;\n\n  /**\n   * Slider Id, if not provided will be generated automatically\n   * @type {string}\n   * @default ''\n   * */\n  @Prop() sliderId: string;\n\n  /**\n   * Display 'ALL' URL\n   * @type {string}\n   * @default ''\n   * */\n  @Prop() displayAllUrl: string;\n\n  /**\n  * autoplay option for products slider\n  */\n  @Prop({ mutable: true }) autoplay: boolean\n\n  /**\n   * Source of the products, if api will get the products from the API, if json will get the products from the products prop\n   * @type {string}\n   * @default ''\n   * */\n  @Prop({\n    reflect: true,\n    mutable: true\n  }) source: 'categories' | 'latest' | 'related' | 'brands' | 'json' | 'tags' | 'selected' | 'offers' | 'landing-page' | 'wishlist';\n\n  /**\n   * The source value, cloud be different values as following:\n   * - array of ids when `source` in ['categories', 'brands', 'tags', 'selected']\n   * - products payload when `source` = 'json'\n   * - product_id when `source` = 'related'\n   *\n   * @type {string}\n   * */\n  @Prop() sourceValue: string;\n\n  /**\n   * Limit for number of products in the list.\n   */\n  @Prop({ mutable: true }) limit: number;\n\n  /**\n   * Slider Configs refer to https://swiperjs.com/swiper-api#parameters and pass the entire config object\n   * @example\n   * let slider = document.querySelector('salla-slider');\n   *  slider.sliderConfig = {\n   *  slidesPerView: 1,\n   *  spaceBetween : 30,\n   *  lazy: true,\n   * }\n   *\n   */\n  @Prop({ reflect: true }) sliderConfig: any;\n\n  /**\n   * Custom Card Component for the Salla Products Slider.\n   *\n   * This component allows you to customize the appearance of individual product cards within a Salla Products Slider.\n   *\n   * @example\n   * <salla-products-slider product-card-component=\"my-custom-card-style1\" ...\n   * <salla-products-slider product-card-component=\"my-custom-card-style2\" ...\n   */\n  @Prop() productCardComponent: string = 'custom-salla-product-card';\n\n\n  @State() productsData: any;\n  @State() isReady: boolean;\n  @State() sourceValueIsValid: boolean;\n  @State() hasCustomComponent: boolean;\n  @State() apiUrl: string = '';\n  @State() parsedSourceValue: any;\n\n  private getItemHTML(product) {\n\n    //as a request they don't want to let the user to open the product details\n    //todo:: find a better way to handle this request\n    this.getSource() === 'landing-page' && (product.url = '');\n    if (this.hasCustomComponent && this.productCardComponent.toLowerCase()=='custom-salla-product-card') {\n      return <div class=\"s-products-slider-card\">\n         <custom-salla-product-card product={product} source={this.getSource()} source-value={this.getSourceValue()} />\n      </div>\n    }\n\n    if(this.hasCustomComponent){\n      const customElem = document.createElement(this.productCardComponent);\n      customElem.setAttribute('product', JSON.stringify(product));\n      customElem.setAttribute('source', this.getSource());\n      customElem.setAttribute('source-value', this.getSourceValue());\n  \n      return <div class=\"s-products-slider-card\" innerHTML={customElem.outerHTML}/>;\n    }\n\n    return <div class=\"s-products-slider-card\">\n      <salla-product-card\n        show-quantity={this.getSource() == 'landing-page'}\n        hide-add-btn={this.getSource() == 'landing-page'}\n        shadow-on-hover={true}\n        product={product} />\n    </div>;\n  }\n\n\n  private canRender() {\n    return this.sourceValueIsValid && this.isReady;\n  }\n  componentWillLoad() {\n      return Helper.onSallaReadyPromise(() => {\n          this.sourceValueIsValid = !!(this.getSourceValue() || this.isSourceWithoutValue());\n          if (!this.sourceValueIsValid) {\n              salla.logger.warn(`source-value prop is required for source [${\n                  this.getSource()\n              }]`);\n              return;\n          }\n          this.hasCustomComponent = !!customElements.get(this.productCardComponent);\n\n          if (this.source === 'json') {\n              this.productsData = this.getSourceValue();\n              this.isReady = true\n              return;\n          }\n\n          if ((this.getSource() == 'related' && !salla.config.get('store.settings.product.related_products_enabled'))) {\n            return this.isReady = false;\n          }\n          \n          return Helper.fetchProducts(this.getSource(), this.getSourceValue(), this.limit).then(res => {\n              this.productsData = res.data\n              this.isReady = true\n              salla.event.emit('salla-products-slider::products.fetched', res.data);\n          });\n      });\n  }\n\n  private getSource() {\n    return Helper.getProductsSource(this.source);\n  }\n\n  private getSourceValue() {\n    return Helper.getProductsSourceValue(this.source, this.sourceValue);\n  }\n\n  render() {\n   \n    if (!this.canRender()) {\n      return;\n    }\n    return (\n      <Host class=\"s-products-slider-wrapper\">\n        <salla-slider\n          class=\"s-products-slider-slider\"\n          id={this.sliderId || `s-products-slider-${Math.random().toString(36).substr(2, 9)}`}\n          auto-play={this.autoplay}\n          type=\"carousel\"\n          block-title={this.blockTitle}\n          block-subTitle={this.subTitle}\n          display-all-url={this.displayAllUrl}\n          sliderConfig={this.sliderConfig ? this.sliderConfig : null}\n        >\n          <div slot=\"items\">\n            {this.productsData?.map(product => this.getItemHTML(product))}\n          </div>\n        </salla-slider>\n      </Host>\n    );\n  }\n\n}\n"],"mappings":";;;6FAAA,MAAMA,EAAyB,G,MCQlBC,EAAmB,M,oRAwFS,4B,mIAOb,G,iCA9FlB,oBAAAC,GACN,MAAO,CAAC,SAAU,SAAU,SAASC,SAASC,KAAKC,Y,CAgG7C,WAAAC,CAAYC,GAIlBH,KAAKC,cAAgB,iBAAmBE,EAAQC,IAAM,IACtD,GAAIJ,KAAKK,oBAAsBL,KAAKM,qBAAqBC,eAAe,4BAA6B,CACnG,OAAOC,EAAA,OAAKC,MAAM,0BACfD,EAAA,6BAA2BL,QAASA,EAASO,OAAQV,KAAKC,YAAW,eAAgBD,KAAKW,mB,CAI/F,GAAGX,KAAKK,mBAAmB,CACzB,MAAMO,EAAaC,SAASC,cAAcd,KAAKM,sBAC/CM,EAAWG,aAAa,UAAWC,KAAKC,UAAUd,IAClDS,EAAWG,aAAa,SAAUf,KAAKC,aACvCW,EAAWG,aAAa,eAAgBf,KAAKW,kBAE7C,OAAOH,EAAA,OAAKC,MAAM,yBAAyBS,UAAWN,EAAWO,W,CAGnE,OAAOX,EAAA,OAAKC,MAAM,0BAChBD,EAAA,sCACiBR,KAAKC,aAAe,eAAc,eACnCD,KAAKC,aAAe,eAAc,kBAC/B,KACjBE,QAASA,I,CAKP,SAAAiB,GACN,OAAOpB,KAAKqB,oBAAsBrB,KAAKsB,O,CAEzC,iBAAAC,GACI,OAAOC,EAAOC,qBAAoB,KAC9BzB,KAAKqB,sBAAwBrB,KAAKW,kBAAoBX,KAAKF,wBAC3D,IAAKE,KAAKqB,mBAAoB,CAC1BK,MAAMC,OAAOC,KAAK,6CACd5B,KAAKC,gBAET,M,CAEJD,KAAKK,qBAAuBwB,eAAeC,IAAI9B,KAAKM,sBAEpD,GAAIN,KAAKU,SAAW,OAAQ,CACxBV,KAAK+B,aAAe/B,KAAKW,iBACzBX,KAAKsB,QAAU,KACf,M,CAGJ,GAAKtB,KAAKC,aAAe,YAAcyB,MAAMM,OAAOF,IAAI,mDAAqD,CAC3G,OAAO9B,KAAKsB,QAAU,K,CAGxB,OAAOE,EAAOS,cAAcjC,KAAKC,YAAaD,KAAKW,iBAAkBX,KAAKkC,OAAOC,MAAKC,IAClFpC,KAAK+B,aAAeK,EAAIC,KACxBrC,KAAKsB,QAAU,KACfI,MAAMY,MAAMC,KAAK,0CAA2CH,EAAIC,KAAK,GACvE,G,CAIF,SAAApC,GACN,OAAOuB,EAAOgB,kBAAkBxC,KAAKU,O,CAG/B,cAAAC,GACN,OAAOa,EAAOiB,uBAAuBzC,KAAKU,OAAQV,KAAK0C,Y,CAGzD,MAAAC,G,MAEE,IAAK3C,KAAKoB,YAAa,CACrB,M,CAEF,OACEZ,EAACoC,EAAI,CAACnC,MAAM,6BACVD,EAAA,gBACEC,MAAM,2BACNoC,GAAI7C,KAAK8C,UAAY,qBAAqBC,KAAKC,SAASC,SAAS,IAAIC,OAAO,EAAG,KAAI,YACxElD,KAAKmD,SAChBC,KAAK,WAAU,cACFpD,KAAKqD,WAAU,iBACZrD,KAAKsD,SAAQ,kBACZtD,KAAKuD,cACtBC,aAAcxD,KAAKwD,aAAexD,KAAKwD,aAAe,MAEtDhD,EAAA,OAAKiD,KAAK,UACPC,EAAA1D,KAAK+B,gBAAY,MAAA2B,SAAA,SAAAA,EAAEC,KAAIxD,GAAWH,KAAKE,YAAYC,O"}